-- T·∫£i Fluent UI Library
local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()

-- √Çm thanh kh·ªüi ƒë·ªông
local startupSound = Instance.new("Sound")
startupSound.SoundId = "rbxassetid://8594342648"
startupSound.Volume = 5
startupSound.Looped = false
startupSound.Parent = game.CoreGui
startupSound:Play()

-- T·∫°o c·ª≠a s·ªï ch√≠nh v·ªõi background ƒë·∫πp
local Window = Library:CreateWindow{
    Title = "CAT HUB",
    SubTitle = "Premium Flight System",
    TabWidth = 160,
    Size = UDim2.fromOffset(600, 450),
    Resize = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl,
    Acrylic = true, -- Hi·ªáu ·ª©ng trong su·ªët
    AcrylicNoise = 0.3 -- ƒê·ªô nhi·ªÖu
}

-- Th√¥ng b√°o kh·ªüi ƒë·ªông chuy√™n nghi·ªáp
local Notification = Window:AddNotification({
    Title = "CH√ÄO M·ª™NG",
    Content = "H·ªá th·ªëng bay cao c·∫•p ƒë√£ s·∫µn s√†ng!",
    Duration = 5,
    Image = "rbxassetid://7072718362" -- Icon m√°y bay
})

-- T·∫°o tab ch√≠nh
local MainTab = Window:AddTab({
    Title = "Flight Control",
    Icon = "rbxassetid://7072718362"
})

-- Section ƒëi·ªÅu khi·ªÉn bay
local FlightSection = MainTab:AddSection("Flight System", {
    Title = "FLIGHT MASTER CONTROL",
    Content = "K√≠ch ho·∫°t h·ªá th·ªëng bay cao c·∫•p"
})

-- Bi·∫øn tr·∫°ng th√°i
local isFlying = false
local flightSpeed = 50
local flightConnection

-- T·∫£i script bay t·ª´ GitHub
local function LoadFlightScript()
    local success, flightScript = pcall(function()
        return game:HttpGet("https://raw.githubusercontent.com/Uranus9103/Tutimripindra/refs/heads/main/Bay")
    end)
    
    if success then
        local loadFunc, err = loadstring(flightScript)
        if loadFunc then
            return loadFunc
        else
            Window:Notify({
                Title = "L·ªñI",
                Content = "Kh√¥ng th·ªÉ t·∫£i script bay: "..tostring(err),
                Duration = 5
            })
            return nil
        end
    else
        Window:Notify({
            Title = "L·ªñI",
            Content = "Kh√¥ng th·ªÉ t·∫£i t·ª´ GitHub",
            Duration = 5
        })
        return nil
    end
end

-- Ch·ª©c nƒÉng bay
local function ToggleFlight()
    isFlying = not isFlying
    
    if isFlying then
        -- K√≠ch ho·∫°t bay
        local flightFunc = LoadFlightScript()
        if flightFunc then
            pcall(flightFunc)
            Window:Notify({
                Title = "TH√ÄNH C√îNG",
                Content = "H·ªá th·ªëng bay ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t!",
                Duration = 3,
                Image = "rbxassetid://7072718362"
            })
            
            -- C·∫≠p nh·∫≠t giao di·ªán
            FlightSection:GetButton(1):SetTitle("T·∫ÆT H·ªÜ TH·ªêNG BAY")
            FlightSection:GetButton(1):SetStyle("Danger")
        end
    else
        -- T·∫Øt bay
        local char = game.Players.LocalPlayer.Character
        if char then
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.PlatformStand = false
                for _, part in ipairs(char:GetDescendants()) do
                    if part:IsA("BodyGyro") or part:IsA("BodyVelocity") then
                        part:Destroy()
                    end
                end
            end
        end
        
        Window:Notify({
            Title = "TH√îNG B√ÅO",
            Content = "H·ªá th·ªëng bay ƒë√£ t·∫Øt",
            Duration = 3
        })
        
        -- C·∫≠p nh·∫≠t giao di·ªán
        FlightSection:GetButton(1):SetTitle("K√çCH HO·∫†T H·ªÜ TH·ªêNG BAY")
        FlightSection:GetButton(1):SetStyle("Primary")
    end
end

-- N√∫t ƒëi·ªÅu khi·ªÉn ch√≠nh
FlightSection:AddButton({
    Title = "K√çCH HO·∫†T H·ªÜ TH·ªêNG BAY",
    Description = "B·∫≠t/t·∫Øt ch·ª©c nƒÉng bay cao c·∫•p",
    Callback = ToggleFlight,
    Style = "Primary"
})

-- Thanh ƒëi·ªÅu ch·ªânh t·ªëc ƒë·ªô
FlightSection:AddSlider({
    Title = "T·ªêC ƒê·ªò BAY",
    Description = "ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô bay (1-100)",
    Default = flightSpeed,
    Min = 1,
    Max = 100,
    Callback = function(value)
        flightSpeed = value
        -- C·∫≠p nh·∫≠t t·ªëc ƒë·ªô bay n·∫øu ƒëang bay
        if isFlying then
            local char = game.Players.LocalPlayer.Character
            if char then
                local torso = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("UpperTorso")
                if torso then
                    local bv = torso:FindFirstChildOfClass("BodyVelocity")
                    if bv then
                        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
                    end
                end
            end
        end
    end
})

-- Section th√¥ng tin
local InfoSection = MainTab:AddSection("Th√¥ng tin", {
    Title = "H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG",
    Content = "C√°ch ƒëi·ªÅu khi·ªÉn h·ªá th·ªëng bay"
})

InfoSection:AddParagraph({
    Title = "ƒêI·ªÄU KHI·ªÇN",
    Content = "W/A/S/D - Di chuy·ªÉn\nSpace - Bay l√™n\nShift - Bay xu·ªëng\nE - TƒÉng t·ªëc"
})

InfoSection:AddParagraph({
    Title = "TH√îNG TIN",
    Content = "Phi√™n b·∫£n: Premium 2.0\nT√°c gi·∫£: subcakevn\nNg√†y ph√°t h√†nh: "..os.date("%d/%m/%Y")
})

-- T·∫°o GUI bay nhanh
local miniFrame = Instance.new("Frame")
miniFrame.Size = UDim2.new(0, 200, 0, 50)
miniFrame.Position = UDim2.new(0.8, 0, 0.8, 0)
miniFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
miniFrame.BorderSizePixel = 0
miniFrame.BackgroundTransparency = 0.3
miniFrame.Active = true
miniFrame.Draggable = true
miniFrame.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = miniFrame

local miniToggle = Instance.new("TextButton")
miniToggle.Size = UDim2.new(1, 0, 1, 0)
miniToggle.BackgroundTransparency = 1
miniToggle.Text = "üõ©Ô∏è B·∫¨T BAY"
miniToggle.Font = Enum.Font.GothamBold
miniToggle.TextColor3 = Color3.new(1, 1, 1)
miniToggle.TextSize = 14
miniToggle.Parent = miniFrame

-- Hi·ªáu ·ª©ng n√∫t mini GUI
miniToggle.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(miniFrame, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.2
    }):Play()
end)

miniToggle.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(miniFrame, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.3
    }):Play()
end)

-- K·∫øt n·ªëi n√∫t mini GUI
miniToggle.MouseButton1Click:Connect(ToggleFlight)

-- C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t mini GUI
game:GetService("RunService").Heartbeat:Connect(function()
    miniToggle.Text = isFlying and "‚úàÔ∏è T·∫ÆT BAY" or "üõ©Ô∏è B·∫¨T BAY"
end)

-- Hi·ªáu ·ª©ng khi bay
local function CreateFlightEffects(char)
    if not char then return end
    
    local torso = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("UpperTorso")
    if torso then
        -- Hi·ªáu ·ª©ng kh√≥i
        local smoke = Instance.new("ParticleEmitter", torso)
        smoke.LightEmission = 1
        smoke.Texture = "rbxassetid://243664672"
        smoke.Color = ColorSequence.new(Color3.fromRGB(0, 200, 255))
        smoke.Lifetime = NumberRange.new(0.5, 1)
        smoke.Rate = 50
        smoke.Speed = NumberRange.new(2)
        smoke.Size = NumberSequence.new(0.5)
        smoke.Transparency = NumberSequence.new(0.5)
        smoke.EmissionDirection = Enum.NormalId.Bottom
        
        -- Hi·ªáu ·ª©ng tia l·ª≠a
        local sparkles = Instance.new("ParticleEmitter", torso)
        sparkles.LightEmission = 1
        sparkles.Texture = "rbxassetid://489658136"
        sparkles.Color = ColorSequence.new(Color3.fromRGB(255, 150, 0))
        sparkles.Lifetime = NumberRange.new(0.3)
        sparkles.Rate = 30
        sparkles.Speed = NumberRange.new(5)
        sparkles.Size = NumberSequence.new(0.3)
    end
end

-- Theo d√µi thay ƒë·ªïi nh√¢n v·∫≠t
game.Players.LocalPlayer.CharacterAdded:Connect(function(char)
    if isFlying then
        wait(1)
        ToggleFlight()
        wait(0.5)
        ToggleFlight()
        CreateFlightEffects(char)
    end
end)

-- K·ªãch b·∫£n d√†i ƒë·ªÉ ƒë·∫£m b·∫£o chuy√™n nghi·ªáp
local longScriptNote = [[
--------------------------------------------------------------------------------
H·ªÜ TH·ªêNG BAY CAO C·∫§P - PREMIUM EDITION
Phi√™n b·∫£n: 2.0.1
Ng√†y ph√°t h√†nh: ]]..os.date("%d/%m/%Y")..[[

T√≠nh nƒÉng n·ªïi b·∫≠t:
‚úî H·ªá th·ªëng bay m∆∞·ª£t m√† v·ªõi v·∫≠t l√Ω t·ªëi ∆∞u
‚úî Giao di·ªán ng∆∞·ªùi d√πng chuy√™n nghi·ªáp
‚úî Hi·ªáu ·ª©ng h√¨nh ·∫£nh ƒë·∫πp m·∫Øt
‚úî T·ªëc ƒë·ªô bay c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh linh ho·∫°t
‚úî T∆∞∆°ng th√≠ch v·ªõi c·∫£ R6 v√† R15
‚úî H·ªá th·ªëng th√¥ng b√°o th√¥ng minh

H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:
1. Nh·∫•n n√∫t "K√çCH HO·∫†T H·ªÜ TH·ªêNG BAY" ƒë·ªÉ b·∫Øt ƒë·∫ßu
2. S·ª≠ d·ª•ng WASD ƒë·ªÉ di chuy·ªÉn
3. Space ƒë·ªÉ bay l√™n, Shift ƒë·ªÉ h·∫° xu·ªëng
4. ƒêi·ªÅu ch·ªânh thanh tr∆∞·ª£t ƒë·ªÉ thay ƒë·ªïi t·ªëc ƒë·ªô

L∆∞u √Ω:
- H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t·∫Øt khi nh√¢n v·∫≠t ch·∫øt
- C√≥ th·ªÉ b·∫≠t/t·∫Øt nhanh b·∫±ng GUI nh·ªè ·ªü g√≥c ph·∫£i
--------------------------------------------------------------------------------
]]

-- Th√™m hi·ªáu ·ª©ng loading
local loadingText = MainTab:AddParagraph({
    Title = "ƒêANG KH·ªûI T·∫†O...",
    Content = "H·ªá th·ªëng ƒëang ki·ªÉm tra c√°c th√†nh ph·∫ßn"
})

for i = 1, 3 do
    wait(0.5)
    loadingText:SetContent("ƒêang t·∫£i module "..i.."/3...")
end

loadingText:SetTitle("KH·ªûI T·∫†O HO√ÄN T·∫§T")
loadingText:SetContent("H·ªá th·ªëng s·∫µn s√†ng ho·∫°t ƒë·ªông!")

-- √Çm thanh khi b·∫≠t/t·∫Øt bay
local flightSound = Instance.new("Sound")
flightSound.SoundId = "rbxassetid://138080526"
flightSound.Volume = 0.5
flightSound.Parent = game:GetService("SoundService")

-- K·∫øt n·ªëi √¢m thanh
ToggleFlight = function()
    flightSound:Play()
    -- G·ªçi h√†m toggle g·ªëc
    local originalToggle = getfenv().ToggleFlight
    originalToggle()
end
